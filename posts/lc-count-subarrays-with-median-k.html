<!doctype html>
<html lang="en">
<head>
  <meta name="google-site-verification" content="nsnfLHRAA2-FGASGfBCEd3XnbtJDOYthzJ_vt2_qkJ8" />
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Jae Moon | [LC] 2488. Count Subarrays With Median K</title>
  <meta name="description" content="https://leetcode.com/problems/count-subarrays-with-median-k/description/">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <meta property="og:title" content="[LC] 2488. Count Subarrays With Median K">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://moonjae.github.io//posts/lc-count-subarrays-with-median-k">
  <meta property="og:description" content="https://leetcode.com/problems/count-subarrays-with-median-k/description/">
  <meta property="og:site_name" content="Jae Moon">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:url" content="https://moonjae.github.io//posts/lc-count-subarrays-with-median-k">
  <meta name="twitter:title" content="[LC] 2488. Count Subarrays With Median K">
  <meta name="twitter:description" content="https://leetcode.com/problems/count-subarrays-with-median-k/description/">

  
    <meta property="og:image" content="https://moonjae.github.io//assets/og-image-ee46bbc61b334e821e81534b1fd43f3fee6f020ec174b3c2114445695fd48c01.jpg">
    <meta name="twitter:image" content="https://moonjae.github.io//assets/og-image-ee46bbc61b334e821e81534b1fd43f3fee6f020ec174b3c2114445695fd48c01.jpg">
  

  <link href="https://moonjae.github.io//feed.xml" type="application/rss+xml" rel="alternate" title="Jae Moon Last 10 blog posts" />

  

  

    
      <link rel="icon" type="image/x-icon" href="/assets/favicon-light-a98c41efc5ed9fcc06ac664c9e2f7a9b3c3b2e0a52357d221fe382f6f4abc8fc.ico">
      <link rel="apple-touch-icon" href="/assets/apple-touch-icon-light-87d1f2a3a19b1500e5c1626a0492025ca5f7f97d24540dc5900288e92112925a.png">
      <link rel="stylesheet" type="text/css" href="/assets/light-bb1553a18d0f1ccfe1aabc010584c49b4277a88503216b78906ba719e30019c1.css">
    

  

</head>

<body>
  <main>
    <div class="grid grid-centered">
      <div class="grid-cell">
        <nav class="header-nav scrollappear">
  <a href="/" class="header-logo" title="Jae Moon">Jae Moon</a>
  <ul class="header-links">
    
      <li>
        <a href="/about" title="About me">
          <svg xmlns="http://www.w3.org/2000/svg" class="icon-about">
  <use href="/assets/about-ecf154b571ab8034ae00aeed91a3b7ad68db80b46d958753ad6216c919486e88.svg#icon-about" xlink:href="/assets/about-ecf154b571ab8034ae00aeed91a3b7ad68db80b46d958753ad6216c919486e88.svg#icon-about"></use>
</svg>

        </a>
      </li>
    
    
    
    
    
    
    
    
    
    
    
      <li>
        <a href="https://www.linkedin.com/in/jae-moon" rel="noreferrer noopener" target="_blank" title="LinkedIn">
          <svg xmlns="http://www.w3.org/2000/svg" class="icon-linkedin">
  <use href="/assets/linkedin-cdc5c107044324a3dfbea2e9ead15873f8dee304c37d73a046988956b706256e.svg#icon-linkedin" xlink:href="/assets/linkedin-cdc5c107044324a3dfbea2e9ead15873f8dee304c37d73a046988956b706256e.svg#icon-linkedin"></use>
</svg>

        </a>
      </li>
    
    
    
    
    
    
    
    
    
    
    
    
    
    
      <li>
        <a href="/feed.xml" rel="noreferrer noopener" target="_blank" title="RSS">
          <svg xmlns="http://www.w3.org/2000/svg" class="icon-rss">
  <use href="/assets/rss-541ec5cea9cefd10d2fcfec01888f3f231a8829940249835fa7b7b3a12ae0d0d.svg#icon-rss" xlink:href="/assets/rss-541ec5cea9cefd10d2fcfec01888f3f231a8829940249835fa7b7b3a12ae0d0d.svg#icon-rss"></use>
</svg>

        </a>
      </li>
    
    
  </ul>
</nav>



        <article class="article scrollappear">
          <header class="article-header">
            <h1>[LC] 2488. Count Subarrays With Median K</h1>
            <p>https://leetcode.com/problems/count-subarrays-with-median-k/description/</p>
            <div class="article-list-footer">
  <span class="article-list-date">
    November 27, 2022
  </span>
  <span class="article-list-divider">-</span>
  <span class="article-list-minutes">
    
    
      3 minute read
    
  </span>
  <span class="article-list-divider">-</span>
  <div class="article-list-tags">
    
      
      <a href="/tag/balance" title="See all posts with tag 'Balance'">Balance</a>
    
      
      <a href="/tag/prefix" title="See all posts with tag 'Prefix'">Prefix</a>
    
      
      <a href="/tag/hashmap" title="See all posts with tag 'Hashmap'">Hashmap</a>
    
  </div>
</div>
          </header>

          <div class="article-content">
            <h1 id="problem-statement">Problem Statement</h1>
<p>You are given an array nums of size n consisting of distinct integers from 1 to n and a positive integer k.
Return the number of non-empty subarrays in nums that have a median equal to k.</p>

<p>Note:
The median of an array is the middle element after sorting the array in ascending order. If the array is of even length, the median is the left middle element.
For example, the median of [2,3,1,4] is 2, and the median of [8,4,3,5,1] is 4.
A subarray is a contiguous part of an array.</p>

<p>Example 1:
Input: nums = [3,2,1,4,5], k = 4
Output: 3
Explanation: The subarrays that have a median equal to 4 are: [4], [4,5] and [1,4,5].</p>

<h1 id="intuition">Intuition</h1>
<p>There are two cases where k becomes median
-no of smaller numbers is equal to no of larger numbers (when size of the subarray is odd)
-no of larger numbers + 1 is equal to no of smaller numbers (when size of the subarray is even)</p>

<h1 id="approach">Approach</h1>
<p>Balance / Prefix / Hashmap</p>
<ol>
  <li>look where k is located in the given array</li>
  <li>iterate towards the left starting from k and try to record the rolling balance</li>
  <li>record the frequency of the balance in a hashmap</li>
  <li>now, iterate from k towards the right side</li>
  <li>record the rolling balance again this time</li>
  <li>check if -rolling balance and -rolling balance + 1 exist in the hashmap, if they do, add both of them to the answer</li>
</ol>

<h1 id="complexity">Complexity</h1>
<ul>
  <li>Time complexity: O(n)</li>
  <li>Space complexity: O(n)</li>
</ul>

<h1 id="code">Code</h1>
<ul>
  <li>initial submission O(n^2)
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>int countSubarrays(vector&lt;int&gt;&amp; nums, int k) {
      int k_index;
      int n = nums.size();
      for (int i = 0; i &lt; n; ++i) {
          if (nums[i] == k) {
              k_index = i;
              break;
          }
      }
      vector&lt;pair&lt;int,int&gt;&gt; prefix_left(n, {0,0});
      vector&lt;pair&lt;int,int&gt;&gt; prefix_right(n, {0,0});
      for (int i = k_index - 1; i &gt;= 0; --i) {
          prefix_left[i] = prefix_left[i + 1];
          if (nums[i] &gt; k) {
              prefix_left[i].second++;
          }
          else {
              prefix_left[i].first++;
          }
      }
      for (int i = k_index + 1; i &lt; n; ++i) {
          prefix_right[i] = prefix_right[i - 1];
          if (nums[i] &gt; k) {
              prefix_right[i].second++;
          }
          else {
              prefix_right[i].first++;
          }
      }
      int cnt = 0;
      for (int l = k_index; l &gt;= 0; --l) {
          for (int r = k_index; r &lt; n; ++r) {
              int size = r - l + 1;
              int smaller = prefix_left[l].first + prefix_right[r].first;
              int larger = prefix_left[l].second + prefix_right[r].second;
              if (size % 2) {
                  if (smaller == larger) ++cnt;
              }
              else {
                  if (smaller + 1 == larger) ++cnt;
              }
          }
      }
      return cnt;
  }
</code></pre></div>    </div>
  </li>
  <li>final submission O(n)
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  int countSubarrays(vector&lt;int&gt;&amp; nums, int k) {
      int k_index;
      int n = nums.size();
      for (int i = 0; i &lt; n; ++i) {
          if (nums[i] == k) {
              k_index = i;
              break;
          }
      }
      unordered_map&lt;int, int&gt; cnt;
      int answer = 0;
      int cur = 0;
      for (int i = k_index; i &gt;= 0; --i) {
          cur += (nums[i] == k) ? 0 : (nums[i] &lt; k) ? -1 : 1;
          ++cnt[cur];
      }
      cur = 0;
      for (int i = k_index; i &lt; n; ++i) {
          cur += (nums[i] == k) ? 0 : (nums[i] &lt; k) ? -1 : 1;
          answer += cnt[-cur] + cnt[-cur + 1];
      }

      return answer;
  }
</code></pre></div>    </div>
  </li>
</ul>

<h1 id="take-away">Take Away</h1>
<ul>
  <li>when the problem related to + / - or left / right, consider using balance</li>
</ul>

          </div>
          <div class="article-share">
            
            
            <a href="https://twitter.com/home?status=[LC]+2488.+Count+Subarrays+With+Median+K%20-%20https://moonjae.github.io//posts/lc-count-subarrays-with-median-k" title="Share on Twitter" rel="noreferrer noopener" target="_blank">
              <svg viewBox="0 0 512 512"><path d="M492 109.5c-17.4 7.7-36 12.9-55.6 15.3 20-12 35.4-31 42.6-53.6 -18.7 11.1-39.4 19.2-61.5 23.5C399.8 75.8 374.6 64 346.8 64c-53.5 0-96.8 43.4-96.8 96.9 0 7.6 0.8 15 2.5 22.1 -80.5-4-151.9-42.6-199.6-101.3 -8.3 14.3-13.1 31-13.1 48.7 0 33.6 17.2 63.3 43.2 80.7C67 210.7 52 206.3 39 199c0 0.4 0 0.8 0 1.2 0 47 33.4 86.1 77.7 95 -8.1 2.2-16.7 3.4-25.5 3.4 -6.2 0-12.3-0.6-18.2-1.8 12.3 38.5 48.1 66.5 90.5 67.3 -33.1 26-74.9 41.5-120.3 41.5 -7.8 0-15.5-0.5-23.1-1.4C62.8 432 113.7 448 168.3 448 346.6 448 444 300.3 444 172.2c0-4.2-0.1-8.4-0.3-12.5C462.6 146 479 129 492 109.5z"/></svg>
            </a>
            <a href="https://www.facebook.com/sharer/sharer.php?u=https://moonjae.github.io//posts/lc-count-subarrays-with-median-k" title="Share on Facebook" rel="noreferrer noopener" target="_blank">
              <svg viewBox="0 0 512 512"><path d="M288 192v-38.1c0-17.2 3.8-25.9 30.5-25.9H352V64h-55.9c-68.5 0-91.1 31.4-91.1 85.3V192h-45v64h45v192h83V256h56.4l7.6-64H288z"/></svg>
            </a>
          </div>

          
            <div id="disqus_thread" class="article-comments"></div>
            <script src="https://chalk-1.disqus.com/embed.js" async defer></script>
            <noscript>Please enable JavaScript to view the comments.</noscript>
          
        </article>
        <footer class="footer scrollappear">
  <p>
  Hi! I am
  <a href="/about" title="About me">Jae Moon</a>.
</p>
</footer>

      </div>
    </div>
  </main>
  
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-28631876-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-28631876-6');
  </script>


<script src="/assets/vendor-061d89160864b5ec5aa5148d6410ad4c21190c45402a81ffcf97a76715b05767.js" type="text/javascript"></script>


  <script src="/assets/webfonts-96493456d319d1bf419afdf8701552d4d486fee6afd304897d4fd81eb4e0cc0b.js" type="text/javascript"></script>



  <script src="/assets/scrollappear-e2da8ea567e418637e31266cc5302126eaa79f62a2273739086358b589a89ee6.js" type="text/javascript"></script>


<script src="/assets/application-cfde13ac81ddaf4351b2e739603e2baf688d0fcc9aba613fe62bbb1c7b037fb9.js" type="text/javascript"></script>


</body>
</html>
